= Управление заданием

.Пиктограмма функции
image::buttons/management-task.png[Планшет со знаком вопроса]

== Общее описание функции

[NOTE]
====
Функция _Управление заданием_ работает с карточками системы _{dv} 4.5_ и, как следствие, применяется для интеграции систем _{dv}_ и _{dv} 4.5_.
====

Функция _Управление заданием_ позволяет изменять некоторые параметры задания непосредственно во время работы бизнес-процесса. Необходимость в подобных изменениях может вызываться обстоятельствами, возникающими во время выполнения задания.

Состояние задания изменяется сразу после выполнения функции _Управление заданием_. Все остальные изменения вносятся в карточку задания и её переменные во время обработки функции _Задание_.

== Сценарии использования

На рисунке ниже представлен пример использования данной функции. В приведенном бизнес-процессе после начальной функции управление передается функции задания -- _Задание по согласованию сметы_ и параллельно -- функции расписания -- _Расчет даты замены исполнителя_, за которой следует функция управления заданием -- _Замена исполнителя_.

.Пример работы функции управления заданием
image::task-management-sample.png[Пример работы функции управления заданием]

.Последовательность работы данного бизнес-процесса:
. Начальная функция передает управление бизнес-процессом функциям _Задание по согласованию сметы_ и _Расчет даты замены исполнителя_.
. Задание, отправленное функцией _Задание по согласованию сметы_, взято в работу.
. Функция расписания определяет период задержки, до окончания которого _Задание по согласованию сметы_ может быть выполнено без использования функции _Замена исполнителя_.
. Если _Задание по согласованию сметы_ не выполнено до истечения срока действия функции _Расчет даты замены исполнителя_, функция _Замена исполнителя_ изменяет данные (исполнителя) функции _Задание по согласованию сметы_.
. Управление бизнес-процессом повторно передается на функцию _Задание по согласованию сметы_, но уже с новым исполнителем.

Подобный бизнес-процесс может использоваться для согласования документов. При этом в случае, например, отбытия в командировку (болезни) исполнителя, взявшего задание в работу и не выполнившего его, задание через определенный промежуток времени будет передано другому исполнителю и выполнено в срок.

== Настройка параметров

.Свойства функции "Управление заданием". Вкладка "Основные данные"
image::management-task-properties.png[Свойства функции "Управление заданием". Вкладка "Основные данные"]

Основные параметры управления заданием указываются на вкладке _Основные данные_ окна свойств функции.

Функция задания::
В поле указываются одна или несколько уже описанных функций _Задание_, выбранных для модификации. Эти функции отображаются в нижнем поле секции _Функция задания_. Чтобы внести в это поле нужную функцию, выберите её в раскрывающемся списке верхнего поля секции и нажмите кнопку image:buttons/add.png[Рамка с плюсом] *Добавить*. Удалить выбранную ранее функцию можно, выделив её в списке и нажав кнопку image:buttons/delete.png[Красный крестик] *Удалить*.

Под полем _Функция задания_ расположена группа переключателей, позволяющих выбрать параметр, который будет изменен в указанных функциях задания.

Принудительное завершение задания::
Позволяет отметить задание как завершенное без участия исполнителя, при этом из личной папки исполнителя удаляется ярлык карточки задания.

Принудительный отзыв задания::
Позволяет отозвать задание, в котором не задан текущий исполнитель, то есть на вкладке _Исполнение задания_ функции _Задание_ поле _Текущий исполнитель_ пусто, задание не взято в работу.

Изменять только содержание::
Указывает на то, что для изменения будет доступно только содержание задания. Поле ввода нового содержания находится в нижней части окна.

Новое состояние::
Позволяет указать другое состояние задания.

Новый исполнитель::
Позволяет указать нового исполнителя путем выбора из _Справочника сотрудников_ или заданием переменной соответствующего типа.

Делегировать к::
Указывается сотрудник путем выбора из справочника сотрудников или заданием переменной соответствующего типа.

Если функция управления заданием должна изменить несколько функций задания, то из всех перечисленных опций будут доступными только _Принудительное завершение задания_ и _Принудительный отзыв задания_.

[NOTE]
====
Перед изменением состояния задания бизнес-процесса необходимо проверить, задан ли текущий исполнитель задания, то есть заполнено ли на вкладке _Исполнение задания_ функции _Задание_ поле _Текущий исполнитель_. +
Это поле заполняется, когда исполнитель принимает задание в работу. Таким образом, функцию управления заданием, определяющую смену состояния задания, следует предварять еще одной функцией управления заданием, проверяющей его состояние.
====

Изменить содержание::
Позволяет изменить содержание задания; новое содержание вводится в поле _Содержание_ с клавиатуры или при помощи переменной типа _Строка_.

Дополнить существующее содержание::
Позволяет дополнить содержание задания; дополнительное содержание вводится в поле _Содержание_ с клавиатуры или при помощи переменной типа _Строка_.
