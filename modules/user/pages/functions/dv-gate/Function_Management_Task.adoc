= Управление заданием

== Пиктограмма функции

image:buttons/Function_Management_Task.png[image]

== Общее описание функции

[NOTE]
====
Функция *Управление заданием* работает с карточками системы _{dv} 4.5_ и, как следствие, применяется для интеграции систем _{dv} 5_ и _{dv} 4.5_.
====

Функция *Управление заданием* позволяет изменять некоторые параметры задания непосредственно во время работы бизнес-процесса; необходимость в подобных изменениях может вызываться обстоятельствами, возникающими во время выполнения задания.

Состояние задания изменяется сразу после выполнения функции *Управление заданием*. Все остальные изменения вносятся в карточку задания и её переменные во время обработки функции *Задание*.

== Сценарии использования

На рисунке ниже представлен пример использования данной функции. В приведенном бизнес-процессе после начальной функции управление передается функции задания (_Задание по согласованию сметы_) и параллельно -- функции расписания (_Расчет даты замены исполнителя_), за которой следует функция управления заданием (_Замена исполнителя_).

image::Example_of_Functions_ManagementTask.png[Пример работы функции управления заданием]

Последовательность работы данного бизнес-процесса:

. Начальная функция передает управление бизнес-процессом функциям _Задание по согласованию сметы_ и _Расчет даты замены исполнителя_.
. Задание, отправленное функцией _Задание по согласованию сметы_, взято в работу.
. Функция расписания определяет период задержки, до окончания которого _Задание по согласованию сметы_ может быть выполнено без использования функции _Замена исполнителя_.
. Если _Задание по согласованию сметы_ не выполнено до истечения срока действия функции _Расчет даты замены исполнителя_, функция _Замена исполнителя_ изменяет данные (исполнителя) функции _Задание по согласованию сметы_.
. Управление бизнес-процессом повторно передается на функцию _Задание по согласованию сметы_, но уже с новым исполнителем.

Подобный бизнес-процесс может использоваться для согласования документов; при этом в случае, например, отбытия в командировку (болезни) исполнителя, взявшего задание в работу и не выполнившего его, задание через определенный промежуток времени будет передано другому исполнителю и выполнено в срок.

== Настройка параметров

image::Parameters_Management_Task.png[Свойства функции "Управление заданием". Вкладка "Основные данные"]

Основные параметры управления заданием указываются на вкладке *Основные данные* окна свойств функции.

Функция задания::
В поле указываются одна или несколько уже описанных функций *Задание*, выбранных для модификации. Эти функции отображаются в нижнем поле секции *Функция задания*. Чтобы внести в это поле нужную функцию, выберите её в раскрывающемся списке верхнего поля секции и нажмите кнопку image:buttons/add.png[Рамка с плюсом] *Добавить*. Удалить выбранную ранее функцию можно, выделив её в списке и нажав кнопку image:buttons/delete.png[image] *Удалить*.

Под полем *Функция задания* расположена группа переключателей, позволяющих выбрать параметр, который будет изменен в указанных функциях задания.

Принудительное завершение задания::
Позволяет отметить задание как завершенное без участия исполнителя, при этом из личной папки исполнителя удаляется ярлык карточки задания.
Принудительный отзыв задания::
Позволяет отозвать задание, в котором не задан текущий исполнитель (то есть на вкладке *Исполнение задания* функции *Задание* поле *Текущий исполнитель* пусто, задание не взято в работу).
Изменять только содержание::
Указывает на то, что для изменения будет доступно только содержание задания. Поле ввода нового содержания находится в нижней части окна.
Новое состояние::
Позволяет указать другое состояние задания.
Новый исполнитель::
Позволяет указать нового исполнителя путем выбора из _Справочника сотрудников_ или заданием переменной соответствующего типа.
Делегировать к::
Указывается сотрудник путем выбора из справочника сотрудников или заданием переменной соответствующего типа.

Если функция управления заданием должна изменить несколько функций задания, то из всех перечисленных опций будут доступными только *Принудительное завершение задания* и *Принудительный отзыв задания*.

[NOTE]
====
Перед изменением состояния задания бизнес-процесса необходимо проверить, задан ли текущий исполнитель задания (то есть заполнено ли на вкладке *Исполнение задания* функции *Задание* поле *Текущий исполнитель*). Это поле заполняется, когда исполнитель принимает задание в работу. Таким образом, функцию управления заданием, определяющую смену состояния задания, следует предварять еще одной функцией управления заданием, проверяющей его состояние.
====

Изменить содержание::
Позволяет изменить содержание задания; новое содержание вводится в поле *Содержание* с клавиатуры или при помощи переменной типа _Строка_.
Дополнить существующее содержание::
Позволяет дополнить содержание задания; дополнительное содержание вводится в поле *Содержание* с клавиатуры или при помощи переменной типа _Строка_.
