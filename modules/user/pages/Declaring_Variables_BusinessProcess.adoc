=  Добавление переменных БП

Все переменные, используемые функциями бизнес-процесса, должны быть заранее объявлены с описанием всех их свойств и параметров в соответствующих диалоговых окнах. При объявлении переменной обязательными являются только [.keyword .parmname]_Название_ и [.keyword .parmname]_Тип_; все остальные параметры – дополнительные и могут не указываться.

Для объявления переменной следует нажать кнопку [.ph .uicontrol]*Настройки* image:Buttons/Settings.png[image] панели инструментов карточки бизнес-процесса и в открывшемся диалоговом окне [.keyword .wintitle]*Свойства процесса* перейти на вкладку [.keyword]*Переменные*, которая содержит краткое описание всех объявленных ранее переменных (если таковые имеются). Это описание включает:

* [.keyword]*Название* переменной;
* [.keyword]*Тип* переменной;
* [.keyword]*Значение*, присвоенное переменной при ее объявлении и принимаемое ею при создании экземпляра бизнес-процесса (необязательный параметр);
* [.keyword]*Обязательная*: значение [.kbd .ph .userinput]`Да` стоит в том случае, если на вкладке [.keyword]*Настройка дополнительных свойств переменной процесса* включен флаг [.ph .uicontrol]*Значение переменной должно быть задано при создании экземпляра бизнес-процесса*; см. далее;
* [.keyword]*Коллекция*: значение [.kbd .ph .userinput]`Да` стоит в том случае, если при описании функции был указан параметр [.ph .uicontrol]*Коллекция значений*; см. далее.

image::Properties_of_Process_Tab_Variables.png[[.fig--title-label]##Рис. 1. ##Окно 'Свойства бизнес-процесса'. Вкладка 'Переменные']

Для описания новой переменной нажмите кнопку [.ph .uicontrol]*Добавить*, для изменения параметров уже имеющейся – кнопку [.ph .uicontrol]*Изменить*, для ее удаления – кнопку [.ph .uicontrol]*Удалить*. Для копирования имеющейся переменной нажмите кнопку [.ph .uicontrol]*Копировать*; при этом в список переменных будет добавлена переменная, свойства которой совпадают со свойствами исходной переменной (за исключением описанного далее флага [.ph .uicontrol]*Переменная была добавлена при выполнении бизнес-процесса*), а название будет отличаться от исходного наличием номера (1) и так далее.

Изменить порядок следования переменных в списке, сгруппировав их по некоторому признаку, можно с помощью кнопок image:Buttons/Green_Arrow_Up.gif[image] и image:Buttons/Green_Arrow_Down.gif[image].

На вкладке [.keyword]*Переменные* реализован мультивыбор переменных: при помощи удерживаемых клавиш [.kbd .ph .userinput]`Ctrl` или [.kbd .ph .userinput]`Shift` для копирования или удаления можно отметить сразу несколько переменных.

При нажатии кнопок [.ph .uicontrol]*Добавить* или [.ph .uicontrol]*Изменить* открывается диалоговое окно [.keyword .wintitle]*Переменная процесса*, в котором указываются основные свойства переменной, а именно:

* [.keyword]*Название*: название переменной для облегчения ее идентификации и указания при описании функций;
* [.keyword]*Тип*: тип значений, которые может принимать переменная;
* [.keyword]*Коллекция значений*: параметр, расширяющий тип переменной, позволяя хранить в одной переменной неограниченное количество объектов одного типа (карточек, файлов, целых чисел); параметр можно указать только при первом объявлении переменной, при редактировании свойств переменной он становится недоступным;
* [.keyword]*Значение*: значение, присваиваемое переменной в момент создания экземпляра бизнес-процесса;

Текст, являющийся значением переменной типа _строка_, можно ввести как непосредственно в поле [.keyword]*Значение*, так и в специально предназначенном для этого окне [.keyword .wintitle]*Введите строку* (окно открывается при двойном щелчке левой кнопкой мыши в поле [.keyword]*Значение*; перевод курсора на следующую строку текста в окне осуществляется нажатием клавиши [.kbd .ph .userinput]`Enter`). В дальнейшем значение такой переменной можно будет просматривать в отдельном окне, даже если бизнес-процесс открыт только для чтения.

* [.keyword]*Описание*: комментарий, в котором полезно описать назначение переменной в бизнес-процессе.

image::Setting_Value_of_Process_Variable.png[[.fig--title-label]#Рис. 2. # Окно задания основных параметров переменной бизнес-процесса]

Нажатие кнопки [.ph .uicontrol]*Дополнительно*, расположенной в нижней части окна [.keyword .wintitle]*Переменная процесса*, приводит к открытию диалогового окна, позволяющего указать дополнительные настройки переменной:

* [.ph .uicontrol]*Сохранять историю значений при исполнении бизнес-процесса*: установка этого флага приведет к созданию доступного для просмотра журнала изменения значения переменной;
* [.keyword]*Значение переменной должно быть задано при создании экземпляра бизнес-процесса*: установка этого флага при создании экземпляра бизнес-процесса вызовет диалоговое окно для указания значения переменной;
* [.keyword]*Переменная была добавлена при выполнении бизнес-процесса*: флаг устанавливается автоматически при создании переменной экземпляром бизнес-процесса (например, карточки документа);
* [.keyword]*Коллекция значений*: дублирует аналогичный флаг в основном окне *Переменная процесса*;
* [.keyword]*Создавать копию значения переменной при создании экземпляра бизнес-процесса* (реализовано для переменных типов карточка DV, карточка файла DV): при создании экземпляра бизнес-процесса карточка (карточка файла) будет скопирована, и далее бизнес-процесс продолжит работу с копией документа; при этом исходная карточка документа (карточка файла) будет оставаться неизменной, исполняя ту же роль, что и шаблон карточки документа (шаблон карточки файла);
* [.keyword]*Скрыта от родительского процесса*: при использовании описываемого бизнес-процесса в функции подпроцесса другого бизнес-процесса переменная не будет доступна для сопоставления с переменными, используемыми в родительском процессе; данный флаг выставлен по умолчанию.

image::Additionale_Properties_of_Variable.png[[.fig--title-label]#Рис. 3. # Окно задания дополнительных свойств переменной бизнес-процесса]

*На уровень выше:* xref:Create_Template_BusinessProcess.adoc[Создание шаблона бизнес-процесса]
