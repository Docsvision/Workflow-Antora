= Добавление переменных БП

Все переменные, используемые функциями бизнес-процесса, должны быть заранее объявлены с описанием всех их свойств и параметров в соответствующих диалоговых окнах. При объявлении переменной обязательными являются только [.keyword .parmname]_Название_ и [.keyword .parmname]_Тип_; все остальные параметры -- дополнительные и могут не указываться.

Для объявления переменной следует нажать кнопку *Настройки* image:Buttons/Settings.png[image] панели инструментов карточки бизнес-процесса и в открывшемся диалоговом окне [.keyword .wintitle]*Свойства процесса* перейти на вкладку *Переменные*, которая содержит краткое описание всех объявленных ранее переменных (если таковые имеются). Это описание включает:

* *Название* переменной;
* *Тип* переменной;
* *Значение*, присвоенное переменной при её объявлении и принимаемое ею при создании экземпляра бизнес-процесса (необязательный параметр);
* *Обязательная*: значение [.kbd .ph .userinput]`Да` стоит в том случае, если на вкладке *Настройка дополнительных свойств переменной процесса* включен флаг *Значение переменной должно быть задано при создании экземпляра бизнес-процесса*; см. далее;
* *Коллекция*: значение [.kbd .ph .userinput]`Да` стоит в том случае, если при описании функции был указан параметр *Коллекция значений*; см. далее.

image::Properties_of_Process_Tab_Variables.png[Окно 'Свойства бизнес-процесса'. Вкладка 'Переменные']

Для описания новой переменной нажмите кнопку *Добавить*, для изменения параметров уже имеющейся -- кнопку *Изменить*, для её удаления -- кнопку *Удалить*. Для копирования имеющейся переменной нажмите кнопку *Копировать*; при этом в список переменных будет добавлена переменная, свойства которой совпадают со свойствами исходной переменной (за исключением описанного далее флага *Переменная была добавлена при выполнении бизнес-процесса*), а название будет отличаться от исходного наличием номера (1) и так далее.

Изменить порядок следования переменных в списке, сгруппировав их по некоторому признаку, можно с помощью кнопок image:Buttons/Green_Arrow_Up.gif[image] и image:Buttons/Green_Arrow_Down.gif[image].

На вкладке *Переменные* реализован мультивыбор переменных: при помощи удерживаемых клавиш [.kbd .ph .userinput]`Ctrl` или [.kbd .ph .userinput]`Shift` для копирования или удаления можно отметить сразу несколько переменных.

При нажатии кнопок *Добавить* или *Изменить* открывается диалоговое окно [.keyword .wintitle]*Переменная процесса*, в котором указываются основные свойства переменной, а именно:

* *Название*: название переменной для облегчения её идентификации и указания при описании функций;
* *Тип*: тип значений, которые может принимать переменная;
* *Коллекция значений*: параметр, расширяющий тип переменной, позволяя хранить в одной переменной неограниченное количество объектов одного типа (карточек, файлов, целых чисел); параметр можно указать только при первом объявлении переменной, при редактировании свойств переменной он становится недоступным;
* *Значение*: значение, присваиваемое переменной в момент создания экземпляра бизнес-процесса;

Текст, являющийся значением переменной типа _строка_, можно ввести как непосредственно в поле *Значение*, так и в специально предназначенном для этого окне [.keyword .wintitle]*Введите строку* (окно открывается при двойном щелчке левой кнопкой мыши в поле *Значение*; перевод курсора на следующую строку текста в окне осуществляется нажатием клавиши [.kbd .ph .userinput]`Enter`). В дальнейшем значение такой переменной можно будет просматривать в отдельном окне, даже если бизнес-процесс открыт только для чтения.

* *Описание*: комментарий, в котором полезно описать назначение переменной в бизнес-процессе.

image::Setting_Value_of_Process_Variable.png[ Окно задания основных параметров переменной бизнес-процесса]

Нажатие кнопки *Дополнительно*, расположенной в нижней части окна [.keyword .wintitle]*Переменная процесса*, приводит к открытию диалогового окна, позволяющего указать дополнительные настройки переменной:

* *Сохранять историю значений при исполнении бизнес-процесса*: установка этого флага приведет к созданию доступного для просмотра журнала изменения значения переменной;
* *Значение переменной должно быть задано при создании экземпляра бизнес-процесса*: установка этого флага при создании экземпляра бизнес-процесса вызовет диалоговое окно для указания значения переменной;
* *Переменная была добавлена при выполнении бизнес-процесса*: флаг устанавливается автоматически при создании переменной экземпляром бизнес-процесса (например, карточки документа);
* *Коллекция значений*: дублирует аналогичный флаг в основном окне *Переменная процесса*;
* *Создавать копию значения переменной при создании экземпляра бизнес-процесса* (реализовано для переменных типов карточка DV, карточка файла DV): при создании экземпляра бизнес-процесса карточка (карточка файла) будет скопирована, и далее бизнес-процесс продолжит работу с копией документа; при этом исходная карточка документа (карточка файла) будет оставаться неизменной, исполняя ту же роль, что и шаблон карточки документа (шаблон карточки файла);
* *Скрыта от родительского процесса*: при использовании описываемого бизнес-процесса в функции подпроцесса другого бизнес-процесса переменная не будет доступна для сопоставления с переменными, используемыми в родительском процессе; данный флаг выставлен по умолчанию.

image::Additionale_Properties_of_Variable.png[ Окно задания дополнительных свойств переменной бизнес-процесса]
