= Добавление переменных БП

Все переменные, используемые функциями бизнес-процесса, должны быть заранее объявлены с описанием всех их свойств и параметров в соответствующих диалоговых окнах. При объявлении переменной обязательными являются только _Название_ и _Тип_. Все остальные параметры -- дополнительные и могут не указываться.

Чтобы объявить переменную, нажмите кнопку *Настройки* image:buttons/settings.png[Настройки] на панели инструментов карточки бизнес-процесса. В открывшемся диалоговом окне _Свойства процесса_ перейдите на вкладку _Переменные_. Вкладка содержит краткое описание всех объявленных ранее переменных (если таковые имеются).

.Окно "Свойства бизнес-процесса". Вкладка "Переменные"
image::bp-properties-variables.png[Окно "Свойства бизнес-процесса". Вкладка "Переменные"]

.Краткое описание переменных на вкладке "Переменные":
* _Название_ переменной.
* _Тип_ переменной.
* _Значение_, присвоенное переменной при её объявлении и принимаемое ею при создании экземпляра бизнес-процесса (необязательный параметр).
* _Обязательная_: значение `Да` ставится в том случае, если на вкладке _Настройка дополнительных свойств переменной процесса_ включен флаг `*Значение переменной должно быть задано при создании экземпляра бизнес-процесса*`. <<next,см. ниже>>.
* _Коллекция_: значение `Да` стоит в том случае, если при описании функции был указан параметр `*Коллекция значений*`. <<colval,см. ниже>>.

****
* Чтобы описать новую переменную, нажмите кнопку *Добавить*.
* Чтобы изменить параметры уже имеющейся -- кнопку *Изменить*.
* Чтобы удалить переменную -- кнопку *Удалить*.
* Чтобы скопировать уже имеющуюся переменную, нажмите кнопку *Копировать*. При этом в список переменных будет добавлена переменная, свойства которой совпадают со свойствами исходной переменной за исключением <<added,описанного далее>> флага `*Переменная была добавлена при выполнении бизнес-процесса*`. Название будет отличаться от исходного наличием номера `(1)` и так далее.
 * Чтобы изменить порядок следования переменных в списке, сгруппируйте их по некоторому признаку с помощью кнопок image:buttons/arrow-up.gif[Стрелка вверх] и image:buttons/arrow-down.gif[Стрелка вниз].
* Удерживая клавиши kbd:[Ctrl] или kbd:[Shift] на вкладке _Переменные_ можно выделить, копировать или удалить сразу несколько переменных.
****

.Окно задания основных параметров переменной бизнес-процесса
image::bp-settings-variables.png[Окно задания основных параметров переменной бизнес-процесса]

При нажатии кнопок *Добавить* или *Изменить* открывается диалоговое окно _Переменная процесса_.

.В окне "Переменная процесса" указаны основные свойства переменной:
* _Название_: название переменной для облегчения её идентификации и указания при описании функций.
* _Тип_: тип значений, которые может принимать переменная.
* [[colval]]_Коллекция значений_: параметр, расширяющий тип переменной, позволяя хранить в одной переменной неограниченное количество объектов одного типа (карточек, файлов, целых чисел). Параметр можно указать только при первом объявлении переменной, при редактировании свойств переменной он становится недоступным.
* _Значение_: значение, присваиваемое переменной в момент создания экземпляра бизнес-процесса.
+
Текст, являющийся значением переменной типа _строка_, можно ввести как непосредственно в поле _Значение_, так и в специально предназначенном для этого окне _Введите строку_. +
Окно _Введите строку_ открывается при двойном щелчке левой кнопкой мыши в поле _Значение_. Перевод курсора на следующую строку текста в окне осуществляется нажатием клавиши kbd:[Enter]). +
В дальнейшем значение такой переменной можно будет просматривать в отдельном окне, даже если бизнес-процесс открыт только для чтения.
+
* _Описание_: комментарий, в котором полезно описать назначение переменной в бизнес-процессе.

.Окно задания дополнительных свойств переменной бизнес-процесса
image::bp-variables-additional.png[Окно задания дополнительных свойств переменной бизнес-процесса]

Нажатие кнопки *Дополнительно* в нижней части окна приводит к открытию диалогового окна, позволяющего указать дополнительные настройки переменной:

* `*Сохранять историю значений при исполнении бизнес-процесса*`: установка этого флага приведет к созданию доступного для просмотра журнала изменения значения переменной.
* [[next]]`*Значение переменной должно быть задано при создании экземпляра бизнес-процесса*`: установка этого флага при создании экземпляра бизнес-процесса вызовет диалоговое окно для указания значения переменной.
* [[added]]`*Переменная была добавлена при выполнении бизнес-процесса*`: флаг устанавливается автоматически при создании переменной экземпляром бизнес-процесса (например, карточки документа).
* `*Коллекция значений*`: дублирует аналогичный флаг в основном окне *Переменная процесса*.
* `*Создавать копию значения переменной при создании экземпляра бизнес-процесса*` (реализовано для переменных типов карточка DV, карточка файла DV): при создании экземпляра бизнес-процесса карточка (карточка файла) будет скопирована, и далее бизнес-процесс продолжит работу с копией документа. при этом исходная карточка документа (карточка файла) будет оставаться неизменной, исполняя ту же роль, что и шаблон карточки документа (шаблон карточки файла).
* `*Скрыта от родительского процесса*`: при использовании описываемого бизнес-процесса в функции подпроцесса другого бизнес-процесса переменная не будет доступна для сопоставления с переменными, используемыми в родительском процессе. данный флаг выставлен по умолчанию.
