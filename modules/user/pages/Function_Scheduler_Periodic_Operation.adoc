= Периодическое срабатывание

На вкладке *Периодическое срабатывание* определяются параметры периодического срабатывания.

image::Parameters_Scheduler_Triggering_Periodic.png[Окно "Расписание". Вкладка "Периодическое срабатывание"]

Начальная дата::
  Дата и время первого срабатывания функции, причем действуют следующие правила:
  +
  * если в поле *Тип повторений* явно не указывается момент срабатывания функции (например, _В МАСКА дни недели через ИНТЕРВАЛ недель_), то функция активизируется в момент времени, указанный в данном поле;
  * если поле не заполнено, функция срабатывает в первый раз, когда приходит её очередь и ей передается управление, а затем -- с указанной периодичностью в то время суток, когда произошло её первое срабатывание;
  * если управление передано функции расписания позднее *Начальной даты*, расчет следующей её активизации производится, исходя из текущей даты, а не из указанной в этом поле;
  * начальная дата может вводиться как с помощью переменной типа _Дата/Время_, так и указанием конкретного значения;
Тип периодичности::
  Правило завершения действия функции расписания -- при достижении некоторой даты (указанной в поле *Конечная дата*) или после определенного количества срабатываний (указанном в поле *Число повторений*); если тип периодичности не указан, функция выполняется в бесконечном цикле.
Конечная дата::
  Для типа периодичности _Конечная дата_. Если в момент передачи управления функции расписания значение текущей даты и времени превышает конечное значение даты, функция завершает работу; значение конечной даты можно указать путем ввода с клавиатуры или при помощи переменной типа _Дата/Время_.
Количество повторений::
  Для типа периодичности _Количество повторений_ указывается количество срабатываний функции; можно указать значение вручную или использовать целочисленную переменную.
Тип повторений::
  Один из следующих типов повторений:
  +
  * _Один раз_ -- однократное повторение.
  * _Каждые ИНТЕРВАЛ мин (час)_ -- повторение каждые <числовое значение> минут/часов/недель/месяцев; момент следующего срабатывания функции рассчитывается прибавлением к предыдущему моменту значения *Интервала* (которое указывается в следующем поле).
  * _Каждые ИНТЕРВАЛ мин (час) после_ -- повторение каждые <числовое значение> минут/часов/недель/месяцев; момент следующего срабатывания функции рассчитывается прибавлением значения *Интервала* (размерность которого указывается в следующем поле) к моменту начала расчета.
  * В МАСКА часы через ИНТЕРВАЛ дней -- повторение в <указание момента времени> часов через <числовое значение> дней (например, в 15:00 через каждые два дня).
  * *В МАСКА дни недели через ИНТЕРВАЛ недель* -- повторение каждые <указание дней недели> через <числовое значение> недель (например, каждую среду через каждые три недели в момент времени, указанный в поле *Начальная дата*).
  * _В МАСКА дни месяца через ИНТЕРВАЛ месяцев_ -- повторение каждые <числовое значение> дни месяца через <числовое значение> месяцев (например, каждое 13 и 25 числа месяца через каждые четыре месяца в момент времени, указанный в поле *Начальная дата*).
  * _В МАСКА дни недели через ИНТЕРВАЛ месяцев_ -- повторение каждые <указание дней недели> через <числовое значение> месяцев (например, каждую среду через каждые два месяца в момент времени, указанный в поле *Начальная дата*).
  * _МАСКА месяцы по ИНТЕРВАЛ (по маске) дням_ -- повторение каждый <указание месяца> по <числовое значение> дням (например, каждый апрель восьмого числа в момент времени, указанный в поле *Начальная дата*).
  * _МАСКА месяцы по ИНТЕРВАЛ (по маске) дням недели_ -- повторение <указание месяца> по <указание дней недели> (например, каждый апрель и июнь по средам и четвергам в момент времени, указанный в поле *Начальная дата*).
Маска повторений::
  Для типа периодичности _Количество повторений_ указываются значения для различных типов повторений; маска повторений может представлять собой числовое значение (значения), название дня (дней) недели, название месяца (месяцев).
Интервал повторений::
  Для типа периодичности _Количество повторений_ определяется число, которое в поле *Тип повторений* обозначено как *ИНТЕРВАЛ*; может быть задан интервал повторений переменной бизнес-процесса типа целое, которая работает либо как абсолютная величина (например, через ИНТЕРВАЛ недель), либо также как Маска (например, если ИНТЕРВАЛ задает маску дней).
Рассчитанная дата::
  В поле может быть указана переменная бизнес-процесса, которой будет присвоено значение даты следующего срабатывания, рассчитанное по параметрам функции, определенным выше на этой же вкладке.
Связь выхода из функции::
  Функция, которой будет передано управление бизнес-процессом после достижения конечной даты, означающей выход из цикла.

[NOTE]
====
Переменная для выбора в поле *Связь выхода из функции* должна быть объявлена в свойствах бизнес-процесса и иметь тип _Дата/Время_.
====

[NOTE]
====
Маска повторений может определяться переменной бизнес-процесса типа целое. Переменная должна представлять собой бинарную маску (бинарная маска -- это 2 в степени, равной требующемуся числу минус один), соответствующую часам, дням недели (с понедельника), числам месяца. Минимальное значение -- 2^0=1, максимальное значение -- 2^30 для 31 числа. Например, маска второго и двенадцатого чисел месяца определяется следующим образом: 2^(2–1)+2^(12-1)=2050.
====
