=  Обработчик ошибок

== Пиктограмма функции

image:Buttons/Function_Errors_Handler.png[image]

== Общее описание функции

Функция [.keyword]*Обработчик ошибок* предназначена для организации обработки ошибок возникающих в других функциях. В стандартном сценарии с нею соединяется (исходящей связью типа _При ошибке_) функция, в которой предположительно может возникнуть ошибка.

Эта функция позволяет:

* производить фильтрацию ошибок по коду;
* контролировать количество возникших ошибок;
* останавливать бизнес-процесс по ошибке.

== Сценарии использования

Можно предложить два сценария использования функции обработчика ошибок (при необходимости они могут совмещаться):

. Пусть имеется функция, в которой периодически происходит ошибка, связанная с внешней системой. Следует связать «проблемную» функцию с функцией обработчика ошибок и задать разумно допустимое число ошибок. По достижении этого числа будут выполнены действия, предусмотренные параметром [.keyword]*При достижении заданного числа ошибок* (см. ниже). Если это число не превышено, то управление передается по всем исходящим от функции обработчика ошибок связям типа _При успехе_ или _При завершении_, за исключением указанной в поле [.keyword]*Выполнить функцию по связи*.
. Пусть имеется функция, в которой допустимо возникновение ошибки с известным кодом (например, «объект заблокирован»), но недопустимо возникновение других ошибок. Следует связать «проблемную» функцию с функцией обработчика ошибок и задать код ожидаемой ошибки и переменную с кодом ошибки. Если код возникшей ошибки не совпадет с кодом ожидаемой, процесс будет остановлен по ошибке "Код произошедшей ошибки не соответствует фильтруемому коду."  Если эти коды совпадают, то управление передается по всем исходящим от функции обработчика ошибок связям типа _При успехе_ или _При завершении_, за исключением указанной в поле [.keyword]*Выполнить функцию по связи*.

== Настройка параметров

image::Parameters_Errors_Handler.png[[.fig--title-label]##Рис. 1. ##Окно "Обработчик ошибок". Вкладка "Параметры"]

Вкладка [.keyword]*Параметры* окна свойств функции содержит следующие поля:

Допустимое число вхождений в функцию::
  Определяет максимальное количество срабатываний функции обработки ошибок до того момента, когда функция должна предпринять действия, предусмотренные параметром [.keyword]*При достижении заданного числа ошибок*.
Фильтровать ошибки по коду::
  Позволяет задать допустимый код ошибки.
Переменная с кодом ошибки::
  Переменная, в которую каким-либо способом заносится код ошибки, возникшей в проблемной функции (обычно указывается в свойствах проблемной функции на вкладке [.keyword]*Общие* в поле [.keyword]*Переменная для кода ошибки*).
При достижении заданного числа ошибок::
  Переключатель, регулирующий режим завершения функции в случае, если превышено допустимое количество вхождений в функцию или код возникшей ошибки не совпадает с фильтром. Функция обработчика ошибок может:
  +
  * [.keyword]*Завершиться с ошибкой*;
  * [.keyword]*Выполнить функцию по связи* – в этом поле выбирается одна из функций, к которым проведены исходящие связи от функции обработчика ошибок; при этом в поле будет указано название функции, к которой будет переходить управление после функции обработчика ошибок, а также имя связи между ними (если оно было указано).

*На уровень выше:* xref:Basic_Functions.adoc[Базовые функции]
