= Общие свойства бизнес-процесса

Диалоговое окно свойств бизнес-процесса открывается при нажатии кнопки *Настройки* на панели инструментов карточки шаблона. Окно содержит четыре вкладки: _Общие_, _Переменные_, _Шлюзы_ и _Дополнительно_.

[#general]
== Общие свойства

.Окно "Свойства процесса". Вкладка "Общие"
image::bp-properties-general.png[Окно "Свойства процесса". Вкладка "Общие"]

На вкладке _Общие_ указываются основные параметры бизнес-процесса.

Название::
Название, которое будет отображаться в {wincl}е и выводиться в заголовке шаблона.

Описание::
Комментарий, содержащий подробное описание назначения бизнес-процесса.

Состояние процесса::
Информационное поле, отображающее стадию работы над шаблоном: *_Разрабатывается_*, *_В работе_*, *_Тестовый процесс_*, *_Готов к использованию_*.

Приоритет::
Определяет очередность обработки процессов (чем выше приоритет, тем быстрее начнет обрабатываться процесс). Возможные значения: *_Наивысший_*, *_Высокий_*, *_Обычный_*, *_Низкий_*, *_Самый низкий_*.

Может использоваться как подпроцесс::
Указывает, будет ли шаблон доступным для выбора в других шаблонах при определении свойств функции подпроцесса.

Разрешен один активный экземпляр процесса::
Указывает, что из всех созданных по данному шаблону экземпляров бизнес-процесса _активным_ может быть только один.

Период обновления::
Позволяет задать период обновления графа процесса при его редактировании. Период обновления может задаваться в пределах от `3` до `65` сек, по умолчанию установлено значение `3` сек. Данная настройка доступна для редактирования как в шаблоне, так и в экземпляре процесса.

Квант обработки::
Время, выделяемое процессу с обычным приоритетом для его обработки. Если установлено значение счетчика `0`, то это число будет равно заданному в _Консоли настройки {dv}_.

[NOTE]
====
Изменение значения поля _Период обновления_ возможно в экземпляре активного (доступного только для чтения) процесса; в этом случае измененная настройка будет применена, но сохранена не будет. Если экземпляр процесса доступен для редактирования, то измененная настройка сохранится и будет применена в дальнейшем.
====

Кроме редактируемых полей вкладка содержит информацию, доступную только для чтения: номер версии {dv}, при помощи которой был создан шаблон, автора шаблона и лицо, внесшего в него последние изменения, а также даты создания шаблона и внесения в него последних изменений.

[#variables]
== Переменные процесса

.Окно "Свойства процесса". Вкладка "Переменные"
image::bp-properties-variables.png[Окно "Свойства процесса". Вкладка "Переменные"]

На вкладке _Переменные_ указываются описание и свойства всех переменных, необходимых для выполнения бизнес-процесса. Перед тем как использовать переменные в функциях, их следует xref:bp-settings-variables.adoc[объявить] на этой вкладке.

== Шлюзы

.Окно "Свойства процесса". Вкладка "Шлюзы"
image::bp-properties-gates.png[Окно "Свойства процесса". Вкладка "Шлюзы"]

Вкладка *Шлюзы* содержит список шлюзов, используемых в бизнес-процессе. Она позволяет также добавить новый шлюз, изменить его свойства или удалить шлюз из списка доступных при разработке бизнес-процесса при помощи соответствующих кнопок.

Добавить::
При нажатии кнопки открывается диалоговое окно, позволяющее включить зарегистрированный в системе шлюз в список доступных для бизнес-процесса.

Изменить::
При нажатии кнопки открывается диалоговое окно, позволяющее ввести описание шлюза -- информационное поле, не заполненное по умолчанию, а также указать настройки соединения, отличные от установленных по умолчанию: адрес сервера, название базы данных и начальный URL.

Удалить::
Нажатие кнопки вызовет удаление шлюза из списка доступных для использования в бизнес-процессе, причем предварительно на вкладке _Переменные_ следует удалить все переменные, поставляемые этим шлюзом, а также убрать из области графа все принадлежащие ему функции. После удаления все переменные и функции, относящиеся к данному шлюзу, станут недоступными для использования в бизнес-процессе.

[#additional]
== Дополнительные сведения

.Окно "Свойства процесса". Вкладка "Дополнительно"
image::bp-properties-additional.png[Окно "Свойства процесса". Вкладка "Дополнительно"]

На вкладке _Дополнительно_ указываются необязательные для работы бизнес-процесса параметры.

Типы инициирующих переменных::
Типы документов, из которых можно будет осуществлять запуск экземпляров бизнес-процесса. Выбираются из списка установкой флажков.

Бизнес-календарь::
Бизнес-календарь, на основе которого будет производиться вычисление сроков.

Сохранить инициирующий документ в переменную::
Переменная бизнес-процесса, в которую будет возвращена карточка инициирующего документа. Это карточка, из которой был запущен экземпляр бизнес-процесса. Тип переменной должен соответствовать типу, выбранному в разделе _Типы инициирующих документов_.
+
Если переменная не указана, данный БП нельзя будет выбрать в качестве БП, запускаемого по событию, в настройках вида карточки в _Справочнике видов карточек_.

Ответственный за бизнес-процесс::
Сотрудник организации, в личной папке которого будут размещаться ярлыки на бизнес-процессы, созданные по данному шаблону и остановленные по ошибке. Выбор производится в окне _Выбор ссылки_ среди сотрудников, групп и ролей справочника сотрудников, при этом при указании группы или роли ярлык на остановленный по ошибке бизнес-процесс получат все члены этих объединений. Если ответственный за бизнес-процесс не был выбран, ярлык на остановленный по ошибке бизнес-процесс будет размещен в личной папке автора БП.

Режим исполнения::
Режим, в котором будет исполняться процесс. Доступны для выбора режимы:
+
* *_x86_* -- обрабатывать в режиме x86.
* *_x64_* -- обрабатывать в режиме x64.
* *_Любой_* -- процесс может исполняться в режиме x86 или x64. В обычном случае БП будет обрабатываться в режиме x64.
* *_Определить автоматически_* -- требуемый режим (x86 или x64) будет определён в зависимости от состава шлюзов и их настроек. Данный режим используется по умолчанию для новых БП.
+
****
Если БП использует шлюзы, следует учитывать, что некоторые из них (например, _Шлюз к 1С_) могут не работать в x64 режиме. Поэтому:

* При запуске процесса на сервере осуществляется вычисление режима исполнения процесса.
* В одном процессе допускается использование шлюзов с режимом исполнения *_x86_* и *_Любой_* или *_x64_* и *_Любой_*. Совместное использование шлюзов *_x86_* и *_x64_* не допускается.
* Вычисленный режим исполнения для шлюзов сравнивается с установленным для процесса. Если они не конфликтуют, процессу присваивается более жесткий режим исполнения:
** Из *_x86_* и *_Любой_* -- *_x86_*.
** Из *_x64_* и *_Любой_* -- *_x64_*.
** Из *_Любой_* и *_Любой_* -- *_Любой_*.
****

Защитить сценарии процесса::
Установка флага приведет к шифрованию симметричным ключом используемых в бизнес-процессе сценариев.

Журналирование::
Открывает окно _Настройки журналирования_, в котором:
+
* В поле _Уровень журналирования_ можно указать глубину сбора информации о прохождении бизнес-процессов:
** *_Не вести журнал_*.
** *_Ошибки_*: в журнал будет заноситься информация об ошибках и информационных сообщениях с важностью большей или равной `10`. Если таковых нет, журнал останется пустым.
** *_Предупреждения_*: в журнал будет заноситься информация об ошибках и предупреждениях, а также об информационных сообщениях с важностью большей или равной `5`.
** *_Все сообщения_*.
* В секции _Стратегия очистки журнала_ положение переключателя задает моменты очистки журнала:
** *Не очищать журнал*.
** *Оставлять не более чем < > сообщений*.
** *Удалять сообщения старше чем < > дней*.
+
Просмотр записей журнала для его последующей очистки осуществляется автоматически каждые `15` минут независимо от выбранной стратегии.

Завершение процесса::
Кнопка позволяет указать системе, что делать с экземпляром процесса после его успешного завершения:
+
* *Ничего не делать*.
* *Удалить процесс* в корзину или безвозвратно. +
Если поставить флаг `*Окончательное удаление*`, бизнес-процессы будут удаляться без возможности восстановления.
+
[WARNING]
====
Если активность бизнес-процессов очень высокая, рекомендуется удалять завершенные БП в корзину и планировать время (технологическое окно) для очистки корзины. В противном случае возможно возникновение проблем с СУБД.
====
+
* *Архивировать процесс* немедленно после завершения, или, при наличии флага `*Отложенное архивирование*`, согласно расписанию архивирования.
+
Опция *Архивировать процесс* сработает только в случае, если учетная запись сервиса Workflow включена в группу *{dv-arch-ops-serv}* на сервере {dv} .
+
В целях повышения производительности Workflow, при архивировании рекомендуется использовать опцию `*Отложенное архивирование*`.
