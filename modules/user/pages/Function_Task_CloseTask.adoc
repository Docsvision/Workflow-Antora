=  Завершение задания

Окно [.keyword]*Завершения задания*, открывающееся при нажатии кнопки [.ph .uicontrol]*Завершение... * на вкладке [.keyword]*Дополнительные данные* состоит из двух секций ([.keyword]*Диалог завершения* и [.keyword]*Условия завершения задания*) и позволяет определить параметры завершения задания.

image::Function_Task_CloseTask.png[[.fig--title-label]#Рис. 1. # Окно "Завершение задания"]

В секцию [.keyword]*Диалог завершения* сгруппированы опции, определяющие поведение задания при его завершении исполнителем.

Текст диалога завершения задания::
  Помещенный в поле текст будет выводиться в заголовке диалогового окна завершения задания. Вводится с клавиатуры или задается при помощи строковой переменной бизнес-процесса типа [.dfn .term]_Строка_.
  +
  При нажатии кнопки image:Buttons/Add.png[image] [.ph .uicontrol]*Добавить* (или image:Buttons/Edit.png[image] [.ph .uicontrol]*Редактировать* – для уже добавленных переменных) рядом с полем [.keyword]*Переменные, значения которых выбираются при завершении задания* открывается диалоговое окно описания переменной:
  +
  * [.keyword]*Описание*: текст, вводимый с клавиатуры, или строковая переменная бизнес-процесса; параметр отображается в колонке [.keyword]*Имя выбора* окна [.keyword .wintitle]*Диалог завершения задания*;
  * [.keyword]*Тип переменной*: следует выбрать тип переменной бизнес-процесса, которой после завершения задания будет возвращаться итоговое значение;
  * [.keyword]*Переменная*: следует указать объявленную переменную бизнес-процесса выбранного типа;
  * [.keyword]*Значение перечисления*;
  * установкой флажков можно сделать переменную доступной только для чтения (флаг [.keyword]*Только для чтения*), а также обязательной при завершении задания (флаг [.keyword]*Обязательный*).

image::Function_Task_CloseTask_VariableSelect.png[[.fig--title-label]#Рис. 2. # Окно "Переменная для выбора"]

Перечисление вариантов завершения задания::
  Определяет, каким образом сотрудник сможет выбрать вариант завершения задания. Поле доступно для редактирования, если в процессе объявлена переменная типа [.dfn .term]_Перечисление_. Возможны варианты нестандартного завершения задания:
  +
  Размещение в карточке задания дополнительных кнопок завершения задания;;
    Для этого следует выбрать в поле переменную, значения которой будут выводиться в качестве кнопок завершения (если значения завершающей переменной не заданы, то на кнопках завершения не будет надписей); число кнопок завершения задания не должно превышать трех, название каждой из них может состоять не более чем из 13 знаков, в противном случае кнопкой завершения задания будет [.ph .uicontrol]*Завершить*, а вариант завершения задания будет выбираться в раскрывающемся списке поля, расположенного слева от кнопки;
  Размещение в карточке задания поля [.keyword]*Завершение задания* с вариантами выбора;;;
    Для этого следует выбрать в поле переменную, значения которой будут выводиться в качестве опций раскрывающегося списка поля, и установить флаг *Отображать перечисление только как список*;
  +
  Открытие при завершении задания диалогового окна [.keyword]*Завершение задания*, в котором пользователю нужно будет задать значения переменных завершения;;
    Для этого следует заполнить поля секции [.keyword]*Диалог завершения*, оставив поле [.keyword]*Перечисление вариантов завершения задания* пустым.
Отображать перечисление только как список::
Не показывать диалог выбора переменных завершения при завершении задания::
  При установленном флаге диалог завершения задания не будет открываться автоматически. Флаг будет игнорирован при наличии в задании незаполненных обязательных значений переменных или любых переменных, зависимых от кнопок завершения; при снятом флажке диалог не будет открываться при наличии завершающей переменной.

Данная функциональность используется следующим образом: после завершения задания на экран выводится диалоговое окно [.keyword .wintitle]*Завершение задания*, в котором исполнитель должен указать необходимые значения параметров в соответствующих полях. В зависимости от того, является ли переменная предназначенной только для чтения или требует обязательного заполнения (см. предыдущий пункт), она будет по-разному отображаться в окне [.keyword .wintitle]*Завершение задания*: названия переменных, значения которых доступны только для чтения, отображаются на экране светло-серым шрифтом; названия переменных, которым после завершения задания обязательно должно быть присвоено некоторое значение, отображаются жирным шрифтом.

Значения параметров завершения задания можно внести в данном окне до завершения задания, для этого нажмите на панели инструментов карточки задания кнопку image:Buttons/FinichTask.png[image].

[NOTE]
====
[.note__title]#Прим.:# В карточке *задания Outlook* не могут быть размещены дополнительные кнопки завершения задания или поле *Завершение задания*. В этом случае из всех вариантов нестандартного завершения задания можно настроить только третий – _открытие при завершении задания диалогового окна_ *_Завершение задания_*. Таким образом, если для задания выбран тип маршрутизации *Задача Outlook*, то поле *Перечисление вариантов завершения задания* всегда следует оставлять пустым.
====

В секции [.keyword]*Условия завершения задания* расположены флажки, определяющие условия завершения задания исполнителем:

Необходимо ввести отчет::
  Указывает на обязательность ввода отчета при завершении задания. Здесь же можно определить, каким образом будет введен отчет, установив переключатели:
  +
  В карточку задания;;
    Отчет будет прикреплен к карточке задания.
  В карточку отчета;;
    Будет сформирована карточка отчета.
Необходимо добавить файл::
  Указывает на обязательность добавления файла в задание при его завершении. Флаг активизируется, если переключатель установлен в положении [.keyword]*В карточку задания*. Здесь же можно обязать исполнителя добавить определенное количество файлов, введя нужное значение с помощью счетчика.
Отсылать автору уведомление об исполнении::
  Указывает, будут ли отсылаться автору автоматические уведомления о ходе исполнения задания.
Необходимо заполнение фактической трудоемкости::
  При установленном флаге задание нельзя будет завершить, не указав его фактическую трудоемкость.

*На уровень выше:* xref:Function_Task_Tab_AdditionalData.adoc[Дополнительные данные о задании]
