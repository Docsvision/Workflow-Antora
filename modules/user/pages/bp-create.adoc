= Создание шаблона бизнес-процесса

Автоматизация любого принятого в организации бизнес-процесса начинается с его формального описания и создания алгоритма его прохождения, который затем реализуется в карточке шаблона бизнес-процесса при помощи функций, являющихся составной частью модуля.

Таким образом шаблон бизнес-процесса -- карточка, содержащая формальное описание реального бизнес-процесса организации в виде последовательности функций.

Структура бизнес-процесса может оказаться достаточно сложной: бизнес-процесс может разделяться на несколько ветвей, каждая из которых выполняется самостоятельно. При этом общий результат выполнения бизнес-процесса может зависеть от выполнения одной, нескольких или всех ветвей, которые могут затем снова объединяться в одну ветвь или оканчиваться каждая самостоятельно.

В тело бизнес-процесса могут включаться циклы, организуемые с помощью функций счетчик и расписание: в этом случае бизнес-процесс или какая-либо его часть проходит многократное исполнение в зависимости от условий цикла. Любая функция может включать параметр задержки перед последующим её исполнением в цикле бизнес-процесса. Последовательность функций устанавливается переходами между ними -- связями, определяющими передачу управления БП от одной функции к другой.

Возможность создания нового БП имеют только пользователи, которые являются членами групп безопасности *{dv-wf-creators-serv}* и *{dv-admins-serv}* на компьютере с сервером СЭД {dv}. Включить пользователя в указанные группы может администратор компьютера.

.Чтобы создать шаблон нового БП:
. Откройте {wincl}.
. Создайте новую карточку типа _Бизнес-процесс_.
.. Откройте папку, в которой будет размещен БП, в дереве папок.
.. Вызовите команду menu:Создать карточку[Бизнес-процесс] из контекстного меню папки или на ленте {wincl}а.
+
.Конструктор бизнес-процессов
image::bp-designer-blank.png[Конструктор бизнес-процессов]
+
. Если для настройки БП нужны функции или типы перемененных, которые предоставляют _шлюзы_, добавьте их (_шлюзы_) в БП.
+
.В новые БП автоматически добавляются шлюзы:
* Шлюз к простым типам -- не может быть отключен.
* Шлюз к {dv}.
* Шлюз к файловой системе.
* Другие _шлюзы_ (в т.ч. шлюз к почте) при необходимости нужно добавить самостоятельно.
+
. Добавьте переменные БП, которые потребуются для работы функций, а также другие свойства БП, подробнее см. в разделе "xref:bp-settings-general.adoc[]".
. Создайте схему БП:
.. Добавьте в область графа БП требуемые функции.
+
Обязательно должны быть добавлены функции _Начальная функция_ и _Конечная функция_.
+
.. Настройте связи между функциями БП.
+
Между функциями _Начальная функция_ и _Конечная функция_ должна существовать непрямая связь через другие функции.
+
.. Настройте свойства функций БП.
. Сохраните бизнес-процесс.

Любой шаблон бизнес-процесса со всем набором функций может экспортироваться в файл формата `.xml`. Возможна также обратная операция -- импорт шаблона бизнес-процесса из файла формата `.xml`, что позволяет создавать новые шаблоны бизнес-процессов на основе существующих.

Для запуска бизнес-процесса по его шаблону Создаётся экземпляр бизнес-процесса, выполнение которого начинается с его инициализации, осуществляемой начальной функцией. После этого управление бизнес-процессом передается функциями друг другу согласно исходящим связям.
