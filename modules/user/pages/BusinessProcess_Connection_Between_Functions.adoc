= Настройка связей между функциями БП

Связи между функциями БП определяют порядок передачи управления бизнес-процессом от одной функции к другой.

Чтобы установить связь между функциями, выполните следующие действия:

. Выделите пиктограмму функции, щелкнув по ней правой кнопкой мыши, щелкните левой кнопкой мыши по пиктограмме функции, при этом она будет выделена девятью прямоугольниками по периметру пиктограммы и одним -- в центре.
. Разместите курсор над центральным квадратом, при этом он должен принять форму крестика (без стрелок).
. Нажмите левую кнопку мыши и, удерживая ее, проведите отрезок к функции, к которой необходимо осуществить переход.

По умолчанию связь между функциями не имеет названия и изображается прямым серым отрезком со стрелкой, а передача управления бизнес-процессом от предыдущей функции к последующей происходит при успешном завершении первой из них. Определить отличные от установленных по умолчанию свойства каждой из связей между любыми функциями можно в диалоговом окне, для открытия которого щелкните по нужной связи правой кнопкой мыши и выберите из открывшегося контекстного меню команду [.keyword .parmname]_Свойства_.

image::Properties_Connection_Between_Functions.png[ Окно свойств связи между функциями]

На единственной вкладке этого окна доступны для редактирования свойства связей между функциями.

Название::
  Указанное здесь название связи будет выводиться на экране, если нажата кнопка *Показывать метки переходов*.
Описание::
  Комментарий, описывающий назначение связи и любые другие дополнительные сведения.
Стиль::
  В поле выбирается тип линии, иллюстрирующей связь:
  +
  .Описание типов линий##
  [width="99%",cols="22%,78%",options="header",]
  |===
  |Стиль |Описание
  |*Прямая* a|
  Тип линии, устанавливаемый по умолчанию

  При определении связи она изображается единственным отрезком со стрелкой. Чтобы изобразить связь в виде ломаной линии произвольной формы, выполните следующие действия:

  . Выделите связь, щелкнув по ней левой кнопкой мыши.
  . Поместите курсор над квадратом, расположенным посередине отрезка, изображающего связь; при этом курсор должен принять форму крестика.
  . Нажмите левую кнопку мыши и, удерживая ее, переместите курсор в желаемую точку: переход между функциями превратится в ломаную линию, состоящую из двух отрезков.
  . Середина обоих вновь образованных отрезков будет отмечена квадратом, каждый из которых можно сделать новой вершиной ломаной линии; процесс можно продолжать, придавая связи любую форму

  |*Дуга* |Позволяет представить переход между функциями в виде дуги
  |*Кривая* |Аналогична дуге, но позволяет создавать более сложные графические формы способом, описанным для *Прямой*
  |===
Тип::
  Указывает условие передачи управления бизнес-процессом от предыдущей функции к последующей; связь может быть одного из указанных в таблице типов.
  +
  .Описание типов связей##
  [width="99%",cols="23%,77%",options="header",]
  |===
  |Стиль |Описание
  |*При успехе* |Передача управления следующей функции происходит при успешном завершении предыдущей. Линия имеет серый цвет
  |*При ошибке* |Передача управления следующей функции происходит при завершении предыдущей по ошибке. Линия имеет красный цвет
  |*При завершении* |Передача управления следующей функции происходит при завершении предыдущей функции вне зависимости от результата (успешного или по ошибке). Линия имеет синий цвет.
  |*При успехе связанной функции* |Передача управления следующей функции происходит при успешном выполнении связанной функции.
  |===
Тип функции::
  поле активно только в том случае, если в качестве типа связи в предыдущем поле указано значение `При успехе связанной функции`. Доступны следующие типы функций:
  +
  * [.keyword .parmname]_Задание_.
  * [.keyword .parmname]_Задание 5_.
  * [.keyword .parmname]_Мониторинг {dv}_.
  * [.keyword .parmname]_Мониторинг файловой системы_.
  * [.keyword .parmname]_Подпроцесс_.
  * [.keyword .parmname]_Расписание_.
  * [.keyword .parmname]_Сценарий_.
  * [.keyword .parmname]_Условие_.

Если выбрана одна из этих функций, становится доступной кнопка *Функция..*. По её нажатию появляется окно свойств соответствующей функции. Использование типа _При успехе связанной функции_ имеет следующее применение: помимо штатного завершения текущей функции возможен альтернативный переход к другой функции при наступлении определенного события. В роли события как раз выступает успешное выполнение связанной функции.

В примере ниже показан простой бизнес-процесс, в котором используется условие альтернативного перехода из функции.

image::Example_Connection_Between_Functions.png[ Пример бизнес-процесса с использованием типа связи "При успехе связанной функции"]

В показанном примере выполнение связанной функции *Расписание* -- это событие, по которому функция *Задание* передаст управление функции *Управление заданием*. Для этого в окне свойств условия нужно сделать следующие настройки:

image::Parameters_Connection_and_RelatedFunctions.png[ Окно параметров связи и связанной функции]

Таким образом, если задание будет завершено до указанного в расписании срока, то будет произведен штатный выход из функции, если нет -- будет передано управление функции *Управление заданием*.

В карточке бизнес-процесса связь, указывающая на связанную функцию, отображается пунктирной линией.
